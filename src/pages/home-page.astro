---
import BaseLayout from "../layouts/Layout.astro";
import Hero from "../components/HeroSection.astro";
import About from "../components/About.astro";
import Cta from "../components/CallToAction.astro";
import Contacto from "../components/Contacto.astro";
import Slider from "../components/Slider.astro";
import Ubicacion from "../components/Ubicacion.astro";
import Formulario from "../components/Formulario.astro";

import { getPageData, getGlobalData } from "../lib/api.ts";

const [page, global] = await Promise.all([
  getPageData("home-page"),
  getGlobalData()
]);

const secciones = page.data[0].Secciones;
---

<BaseLayout global={global}>
  {secciones.map((section) => {
    switch (section.__component) {
      case "shared.hero":
        return <Hero data={section} />;
      case "shared.about":
        return <About data={section} />;
      case "shared.cta":
        return <Cta data={section} />;
      case "shared.contacto":
        return <Contacto data={section} />;
      case "shared.slider":
        return <Slider data={section} />;
      case "shared.ubicacion":
        return <Ubicacion data={section} />;
      case "shared.formulario":
        return <Formulario data={section} />;
    }
  })}
</BaseLayout>
